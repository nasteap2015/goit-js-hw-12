{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { gallery, loader, pages, requestedValue, loadButton } from '../main.js';\n\nexport let limitOfPages = 0;\n\nexport async function fetchImg() {\n  loadButton.hidden = true;\n  loader.hidden = false;\n  gallery.innerHTML = '';\n  const options = new URLSearchParams({\n    key: '43152818-b9b3fa9adc16b8bb91486a66f',\n    q: requestedValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: '15',\n    page: pages,\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${options}`);\n  limitOfPages = Math.ceil(response.data.totalHits / options.get('per_page'));\n  return response.data;\n}\n\nexport async function fetchMoreImg() {\n  const options = new URLSearchParams({\n    key: '43152818-b9b3fa9adc16b8bb91486a66f',\n    q: requestedValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: '15',\n    page: pages,\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${options}`);\n  if (pages >= limitOfPages) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      progressBar: false,\n    });\n    loadButton.hidden = true;\n  }\n  return response.data;\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { lightbox, loadButton } from '../main.js';\n\nlet markup = undefined;\nimport { gallery, loader } from '../main.js';\n\nexport function renderImg(img) {\n  loader.hidden = true;\n  if (img.hits.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      progressBar: false,\n      messageColor: '#fafafb',\n      maxWidth: '432px',\n    });\n    loadButton.hidden = true;\n  } else {\n    markup = img.hits\n      .flatMap(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) =>\n          `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${largeImageURL}\"> <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/> </a>\n              <ul class=\"gallery-item-info-list\"><li class=\"gallery-item-info\">Likes<span class=\"gallery-item-info-value\">${likes}</span></li><li class=\"gallery-item-info\">Views<span class=\"gallery-item-info-value\">${views}</span></li><li class=\"gallery-item-info\">Comments<span class=\"gallery-item-info-value\">${comments}</span></li><li class=\"gallery-item-info\">Downloads<span class=\"gallery-item-info-value\">${downloads}</span></li></ul></li>`\n      )\n      .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImg, fetchMoreImg, limitOfPages } from './js/pixabay-api.js';\nimport { renderImg } from './js/render-functions.js';\n\nconst form = document.querySelector('form');\nexport const input = document.querySelector('input');\nexport const gallery = document.querySelector('.gallery');\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\nexport const loader = document.querySelector('.loader');\nexport let pages = 1;\nexport let requestedValue = '';\nexport const loadButton = document.querySelector('.load-more-btn');\nconst element = document.querySelector('.gallery');\nloadButton.setAttribute('hidden', true);\nloader.setAttribute('hidden', true);\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  pages = 1;\n  requestedValue = input.value;\n  if (event.target.elements.keyword.value === '') {\n    iziToast.error({\n      message: 'Please enter key word',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      progressBar: false,\n      messageColor: '#fafafb',\n    });\n    return;\n  }\n  const img = await fetchImg();\n  renderImg(img);\n  ScrollBy();\n  form.reset();\n  if (pages >= limitOfPages) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      progressBar: false,\n    });\n    loadButton.hidden = true;\n  } else {\n    loadButton.hidden = false;\n  }\n  pages += 1;\n});\n\nloadButton.addEventListener('click', async event => {\n  event.preventDefault();\n  const img = await fetchMoreImg();\n  renderImg(img);\n  ScrollBy();\n  pages += 1;\n});\n\nfunction ScrollBy() {\n  const elementHeight = element.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: elementHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["limitOfPages","fetchImg","loadButton","loader","gallery","options","requestedValue","pages","response","axios","fetchMoreImg","iziToast","markup","renderImg","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","form","input","SimpleLightbox","element","event","ScrollBy","elementHeight"],"mappings":"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"}